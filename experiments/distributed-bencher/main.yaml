---
- name: Set up cluster
  hosts: cluster
  become: true
  tags: setup
  any_errors_fatal: true
  roles:
    - role: roles/setup-cluster

- name: Set up bencher
  hosts: bencher
  become: true
  tags: setup
  any_errors_fatal: true
  roles:
    - role: roles/setup-bencher

- name: Run cluster
  hosts: cluster
  become: true
  tags: run
  any_errors_fatal: true
  roles:
    - role: roles/run-cluster

- name: Run bencher
  hosts: bencher
  become: true
  tags: run
  any_errors_fatal: true
  roles:
    - role: roles/run-bencher

- name: Fetch bencher
  hosts: bencher
  become: true
  tags: fetch
  roles:
    - role: roles/fetch-bencher

- name: Fetch cluster
  hosts: cluster
  become: true
  tags: fetch
  roles:
    - role: roles/fetch-cluster

- name: Teardown bencher
  hosts: bencher
  become: true
  tags: teardown
  roles:
    - role: roles/teardown-bencher

- name: Teardown cluster
  hosts: cluster
  become: true
  tags: teardown
  roles:
    - role: roles/teardown-cluster
