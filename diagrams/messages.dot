digraph G {
  rankdir=LR;
  node[shape=rectangle,style=rounded];

  server[label="Server"];
  frontend[label="Frontend"];
  backend[label="Backend"];

  server -> frontend [ label="CurrentServer",color="red3" ];
  server -> frontend [ label="Get",color="red3" ];
  server -> frontend [ label="Insert",color="red3" ];
  server -> frontend [ label="Remove",color="red3" ];
  server -> frontend [ label="Txn",color="red3" ];
  server -> frontend [ label="WatchRange",color="blue3" ];
  server -> frontend [ label="CreateLease",color="red3" ];
  server -> frontend [ label="RefreshLease",color="red3" ];
  server -> frontend [ label="RevokeLease",color="red3" ];

  backend -> frontend [ label="ApplyPatch",color="blue3" ];

  frontend -> backend [ label="ApplyLocalChange",color="blue3" ];
  frontend -> backend [ label="ApplyChanges",color="blue3" ];
  frontend -> backend [ label="GetPatch",color="red3" ];

  subgraph cluster_0 {
    label = "Legend";
    a [color=red3,label="Synchronous"]
    b [color=blue3,label="Asynchronous"]
  }
}
